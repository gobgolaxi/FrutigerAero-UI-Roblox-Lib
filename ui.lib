-- Frutiger Aero UI Library by AI
local Library = {}
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

-- Настройки темы (Aero Colors)
local Theme = {
	WindowStart = Color3.fromRGB(240, 248, 255), -- Светло-голубой
	WindowEnd = Color3.fromRGB(176, 224, 230),
	HeaderStart = Color3.fromRGB(0, 191, 255),   -- Deep Sky Blue
	HeaderEnd = Color3.fromRGB(0, 100, 200),
	ElementBg = Color3.fromRGB(255, 255, 255),
	Text = Color3.fromRGB(20, 20, 20),
	Accent = Color3.fromRGB(50, 205, 50),        -- Aero Green (Lime)
	GlossyWhite = Color3.fromRGB(255, 255, 255)
}

-- Хелпер для создания глянцевого эффекта (Aero Shine)
local function AddGloss(instance)
	local Gloss = Instance.new("Frame")
	Gloss.Name = "Gloss"
	Gloss.Size = UDim2.new(1, 0, 0.5, 0) -- Верхняя половина
	Gloss.Position = UDim2.new(0, 0, 0, 0)
	Gloss.BackgroundColor3 = Theme.GlossyWhite
	Gloss.BackgroundTransparency = 0.85
	Gloss.BorderSizePixel = 0
	Gloss.ZIndex = instance.ZIndex + 1
	
	local Corner = instance:FindFirstChildWhichIsA("UICorner")
	if Corner then
		local NewCorner = Corner:Clone()
		NewCorner.Parent = Gloss
	end
	
	Gloss.Parent = instance
end

-- Функция перетаскивания (Draggable)
local function MakeDraggable(topbarobject, object)
	local Dragging = nil
	local DragInput = nil
	local DragStart = nil
	local StartPosition = nil

	local function Update(input)
		local Delta = input.Position - DragStart
		object.Position = UDim2.new(StartPosition.X.Scale, StartPosition.X.Offset + Delta.X, StartPosition.Y.Scale, StartPosition.Y.Offset + Delta.Y)
	end

	topbarobject.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
			Dragging = true
			DragStart = input.Position
			StartPosition = object.Position

			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					Dragging = false
				end
			end)
		end
	end)

	topbarobject.InputChanged:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
			DragInput = input
		end
	end)

	UserInputService.InputChanged:Connect(function(input)
		if input == DragInput and Dragging then
			Update(input)
		end
	end)
end

function Library:CreateWindow(titleText)
	local ScreenGui = Instance.new("ScreenGui")
	ScreenGui.Name = "AeroLib"
	ScreenGui.Parent = game.CoreGui -- Или game.Players.LocalPlayer.PlayerGui для теста
	
	-- Главное окно
	local MainFrame = Instance.new("Frame")
	MainFrame.Name = "MainFrame"
	MainFrame.Size = UDim2.new(0, 500, 0, 350)
	MainFrame.Position = UDim2.new(0.5, -250, 0.5, -175)
	MainFrame.BackgroundColor3 = Theme.WindowEnd
	MainFrame.BorderSizePixel = 0
	MainFrame.Parent = ScreenGui
	
	local MainCorner = Instance.new("UICorner")
	MainCorner.CornerRadius = UDim.new(0, 12)
	MainCorner.Parent = MainFrame
	
	local MainGradient = Instance.new("UIGradient")
	MainGradient.Color = ColorSequence.new{
		ColorSequenceKeypoint.new(0, Theme.WindowStart),
		ColorSequenceKeypoint.new(1, Theme.WindowEnd)
	}
	MainGradient.Rotation = 90
	MainGradient.Parent = MainFrame
	
	-- Обводка (Stroke)
	local Stroke = Instance.new("UIStroke")
	Stroke.Color = Color3.fromRGB(100, 150, 200)
	Stroke.Thickness = 2
	Stroke.Parent = MainFrame

	-- Заголовок (TopBar)
	local TopBar = Instance.new("Frame")
	TopBar.Name = "TopBar"
	TopBar.Size = UDim2.new(1, 0, 0, 35)
	TopBar.BackgroundColor3 = Theme.HeaderStart
	TopBar.Parent = MainFrame
	
	local TopBarCorner = Instance.new("UICorner")
	TopBarCorner.CornerRadius = UDim.new(0, 12)
	TopBarCorner.Parent = TopBar
	
	-- Хак чтобы нижние углы заголовка были прямыми
	local HideBottomCorner = Instance.new("Frame")
	HideBottomCorner.Size = UDim2.new(1, 0, 0.5, 0)
	HideBottomCorner.Position = UDim2.new(0, 0, 0.5, 0)
	HideBottomCorner.BackgroundColor3 = Theme.HeaderEnd
	HideBottomCorner.BorderSizePixel = 0
	HideBottomCorner.Parent = TopBar
	
	local TopBarGradient = Instance.new("UIGradient")
	TopBarGradient.Color = ColorSequence.new{
		ColorSequenceKeypoint.new(0, Theme.HeaderStart),
		ColorSequenceKeypoint.new(1, Theme.HeaderEnd)
	}
	TopBarGradient.Rotation = 90
	TopBarGradient.Parent = TopBar
	
	-- Aero Gloss on Header
	AddGloss(TopBar)
	
	local Title = Instance.new("TextLabel")
	Title.Text = titleText or "Frutiger Aero"
	Title.Size = UDim2.new(1, -20, 1, 0)
	Title.Position = UDim2.new(0, 10, 0, 0)
	Title.BackgroundTransparency = 1
	Title.TextColor3 = Color3.fromRGB(255, 255, 255)
	Title.Font = Enum.Font.GothamBold
	Title.TextSize = 16
	Title.TextXAlignment = Enum.TextXAlignment.Left
	Title.Parent = TopBar
	
	-- Тень для текста (для читаемости)
	local TitleShadow = Instance.new("TextLabel")
	TitleShadow.Text = titleText or "Frutiger Aero"
	TitleShadow.Size = UDim2.new(1, -20, 1, 0)
	TitleShadow.Position = UDim2.new(0, 11, 0, 1) -- Смещение
	TitleShadow.BackgroundTransparency = 1
	TitleShadow.TextColor3 = Color3.fromRGB(0, 0, 0)
	TitleShadow.TextTransparency = 0.6
	TitleShadow.Font = Enum.Font.GothamBold
	TitleShadow.TextSize = 16
	TitleShadow.TextXAlignment = Enum.TextXAlignment.Left
	TitleShadow.ZIndex = Title.ZIndex - 1
	TitleShadow.Parent = TopBar

	MakeDraggable(TopBar, MainFrame)
	
	-- Контейнер для Табов (Слева или Сверху? Сделаем Слева как в старых меню)
	local TabContainer = Instance.new("ScrollingFrame")
	TabContainer.Size = UDim2.new(0, 120, 1, -45)
	TabContainer.Position = UDim2.new(0, 10, 0, 40)
	TabContainer.BackgroundTransparency = 0.5
	TabContainer.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	TabContainer.BorderSizePixel = 0
	TabContainer.ScrollBarThickness = 0
	TabContainer.Parent = MainFrame
	
	local TabCorner = Instance.new("UICorner")
	TabCorner.CornerRadius = UDim.new(0, 8)
	TabCorner.Parent = TabContainer
	
	local TabListLayout = Instance.new("UIListLayout")
	TabListLayout.SortOrder = Enum.SortOrder.LayoutOrder
	TabListLayout.Padding = UDim.new(0, 5)
	TabListLayout.Parent = TabContainer
	
	local TabPadding = Instance.new("UIPadding")
	TabPadding.PaddingTop = UDim.new(0, 5)
	TabPadding.PaddingLeft = UDim.new(0, 5)
	TabPadding.Parent = TabContainer
	
	-- Контейнер для Страниц
	local PageContainer = Instance.new("Frame")
	PageContainer.Size = UDim2.new(1, -145, 1, -45)
	PageContainer.Position = UDim2.new(0, 135, 0, 40)
	PageContainer.BackgroundTransparency = 1
	PageContainer.Parent = MainFrame
	
	local PagesFolder = Instance.new("Folder")
	PagesFolder.Name = "Pages"
	PagesFolder.Parent = PageContainer

	local Window = {}

	function Window:Tab(name)
		local TabButton = Instance.new("TextButton")
		TabButton.Name = name
		TabButton.Size = UDim2.new(1, -10, 0, 30)
		TabButton.BackgroundColor3 = Theme.ElementBg
		TabButton.Text = name
		TabButton.TextColor3 = Theme.Text
		TabButton.Font = Enum.Font.GothamSemibold
		TabButton.TextSize = 14
		TabButton.AutoButtonColor = false
		TabButton.Parent = TabContainer
		
		local TabBtnCorner = Instance.new("UICorner")
		TabBtnCorner.CornerRadius = UDim.new(0, 6)
		TabBtnCorner.Parent = TabButton
		
		-- Страница (ScrollingFrame для элементов)
		local Page = Instance.new("ScrollingFrame")
		Page.Name = name
		Page.Size = UDim2.new(1, 0, 1, 0)
		Page.BackgroundTransparency = 1
		Page.ScrollBarThickness = 4
		Page.ScrollBarImageColor3 = Theme.HeaderStart
		Page.Visible = false -- Скрыта по умолчанию
		Page.Parent = PagesFolder
		
		local PageLayout = Instance.new("UIListLayout")
		PageLayout.SortOrder = Enum.SortOrder.LayoutOrder
		PageLayout.Padding = UDim.new(0, 8)
		PageLayout.Parent = Page
		
		local PagePad = Instance.new("UIPadding")
		PagePad.PaddingTop = UDim.new(0, 5)
		PagePad.PaddingRight = UDim.new(0, 5)
		PagePad.PaddingLeft = UDim.new(0, 5)
		PagePad.Parent = Page
		
		-- Логика переключения
		TabButton.MouseButton1Click:Connect(function()
			for _, p in pairs(PagesFolder:GetChildren()) do
				p.Visible = false
			end
			Page.Visible = true
			
			-- Анимация кнопки таба
			for _, btn in pairs(TabContainer:GetChildren()) do
				if btn:IsA("TextButton") then
					TweenService:Create(btn, TweenInfo.new(0.2), {BackgroundColor3 = Theme.ElementBg, TextColor3 = Theme.Text}):Play()
				end
			end
			TweenService:Create(TabButton, TweenInfo.new(0.2), {BackgroundColor3 = Theme.HeaderStart, TextColor3 = Color3.fromRGB(255,255,255)}):Play()
		end)
		
		-- Активируем первый таб по умолчанию
		if #PagesFolder:GetChildren() == 1 then
			TabButton.BackgroundColor3 = Theme.HeaderStart
			TabButton.TextColor3 = Color3.fromRGB(255,255,255)
			Page.Visible = true
		end

		local Elements = {}
		
		-- BUTTON
		function Elements:Button(text, callback)
			local Btn = Instance.new("TextButton")
			Btn.Size = UDim2.new(1, 0, 0, 35)
			Btn.BackgroundColor3 = Color3.fromRGB(250, 250, 250)
			Btn.Text = text
			Btn.TextColor3 = Theme.Text
			Btn.Font = Enum.Font.Gotham
			Btn.TextSize = 14
			Btn.Parent = Page
			
			local BtnCorner = Instance.new("UICorner")
			BtnCorner.CornerRadius = UDim.new(0, 8)
			BtnCorner.Parent = Btn
			
			local BtnStroke = Instance.new("UIStroke")
			BtnStroke.Color = Color3.fromRGB(200, 200, 200)
			BtnStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
			BtnStroke.Parent = Btn
			
			-- Gradient для объема
			local Gradient = Instance.new("UIGradient")
			Gradient.Color = ColorSequence.new{
				ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 255, 255)),
				ColorSequenceKeypoint.new(1, Color3.fromRGB(230, 230, 230))
			}
			Gradient.Rotation = 90
			Gradient.Parent = Btn
			
			AddGloss(Btn)
			
			Btn.MouseButton1Click:Connect(function()
				callback()
				-- Клик эффект
				local t = TweenService:Create(Btn, TweenInfo.new(0.1), {Size = UDim2.new(1, -4, 0, 31)})
				t:Play()
				t.Completed:Wait()
				TweenService:Create(Btn, TweenInfo.new(0.1), {Size = UDim2.new(1, 0, 0, 35)}):Play()
			end)
		end
		
		-- CHECKBOX
		function Elements:Toggle(text, default, callback)
			local ToggleFrame = Instance.new("TextButton") -- Используем кнопку как контейнер
			ToggleFrame.Size = UDim2.new(1, 0, 0, 35)
			ToggleFrame.BackgroundColor3 = Color3.fromRGB(250, 250, 250)
			ToggleFrame.Text = ""
			ToggleFrame.AutoButtonColor = false
			ToggleFrame.Parent = Page
			
			local Corner = Instance.new("UICorner")
			Corner.CornerRadius = UDim.new(0, 8)
			Corner.Parent = ToggleFrame
			
			local Label = Instance.new("TextLabel")
			Label.Text = text
			Label.Size = UDim2.new(1, -50, 1, 0)
			Label.Position = UDim2.new(0, 10, 0, 0)
			Label.BackgroundTransparency = 1
			Label.TextXAlignment = Enum.TextXAlignment.Left
			Label.Font = Enum.Font.Gotham
			Label.TextColor3 = Theme.Text
			Label.TextSize = 14
			Label.Parent = ToggleFrame
			
			-- Сам чекбокс (квадратик)
			local Box = Instance.new("Frame")
			Box.Size = UDim2.new(0, 20, 0, 20)
			Box.Position = UDim2.new(1, -30, 0.5, -10)
			Box.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
			Box.Parent = ToggleFrame
			
			local BoxCorner = Instance.new("UICorner")
			BoxCorner.CornerRadius = UDim.new(0, 4)
			BoxCorner.Parent = Box
			
			local BoxStroke = Instance.new("UIStroke")
			BoxStroke.Color = Color3.fromRGB(180, 180, 180)
			BoxStroke.Parent = Box
			
			local Check = Instance.new("Frame")
			Check.Size = UDim2.new(1, -6, 1, -6)
			Check.Position = UDim2.new(0, 3, 0, 3)
			Check.BackgroundColor3 = Theme.Accent -- Aero Green
			Check.BackgroundTransparency = default and 0 or 1
			Check.Parent = Box
			
			local CheckCorner = Instance.new("UICorner")
			CheckCorner.CornerRadius = UDim.new(0, 3)
			CheckCorner.Parent = Check
			
			-- Gloss внутри активного чека
			local CheckGloss = Instance.new("UIGradient")
			CheckGloss.Color = ColorSequence.new{
				ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 255, 255)),
				ColorSequenceKeypoint.new(1, Theme.Accent)
			}
			CheckGloss.Rotation = 90
			CheckGloss.Parent = Check
			
			local toggled = default
			
			ToggleFrame.MouseButton1Click:Connect(function()
				toggled = not toggled
				if toggled then
					TweenService:Create(Check, TweenInfo.new(0.2), {BackgroundTransparency = 0}):Play()
				else
					TweenService:Create(Check, TweenInfo.new(0.2), {BackgroundTransparency = 1}):Play()
				end
				callback(toggled)
			end)
		end
		
		-- SLIDER
		function Elements:Slider(text, min, max, default, callback)
			local SliderFrame = Instance.new("Frame")
			SliderFrame.Size = UDim2.new(1, 0, 0, 50)
			SliderFrame.BackgroundColor3 = Color3.fromRGB(250, 250, 250)
			SliderFrame.Parent = Page
			
			local Corner = Instance.new("UICorner")
			Corner.CornerRadius = UDim.new(0, 8)
			Corner.Parent = SliderFrame
			
			local Label = Instance.new("TextLabel")
			Label.Text = text
			Label.Size = UDim2.new(1, 0, 0, 20)
			Label.Position = UDim2.new(0, 10, 0, 5)
			Label.BackgroundTransparency = 1
			Label.TextXAlignment = Enum.TextXAlignment.Left
			Label.Font = Enum.Font.Gotham
			Label.TextColor3 = Theme.Text
			Label.TextSize = 14
			Label.Parent = SliderFrame
			
			local ValueLabel = Instance.new("TextLabel")
			ValueLabel.Text = tostring(default)
			ValueLabel.Size = UDim2.new(1, -20, 0, 20)
			ValueLabel.Position = UDim2.new(0, 0, 0, 5)
			ValueLabel.BackgroundTransparency = 1
			ValueLabel.TextXAlignment = Enum.TextXAlignment.Right
			ValueLabel.Font = Enum.Font.GothamBold
			ValueLabel.TextColor3 = Theme.HeaderStart
			ValueLabel.TextSize = 14
			ValueLabel.Parent = SliderFrame
			
			-- Полоска трека
			local Track = Instance.new("TextButton")
			Track.Text = ""
			Track.AutoButtonColor = false
			Track.Size = UDim2.new(1, -20, 0, 10)
			Track.Position = UDim2.new(0, 10, 0, 30)
			Track.BackgroundColor3 = Color3.fromRGB(220, 220, 220)
			Track.Parent = SliderFrame
			
			local TrackCorner = Instance.new("UICorner")
			TrackCorner.CornerRadius = UDim.new(1, 0)
			TrackCorner.Parent = Track
			
			-- Заполнение
			local Fill = Instance.new("Frame")
			Fill.Size = UDim2.new((default - min) / (max - min), 0, 1, 0)
			Fill.BackgroundColor3 = Theme.HeaderStart
			Fill.Parent = Track
			
			local FillCorner = Instance.new("UICorner")
			FillCorner.CornerRadius = UDim.new(1, 0)
			FillCorner.Parent = Fill
			
			-- Aero Glass effect on fill
			local FillGradient = Instance.new("UIGradient")
			FillGradient.Color = ColorSequence.new{
				ColorSequenceKeypoint.new(0, Color3.fromRGB(135, 206, 250)),
				ColorSequenceKeypoint.new(1, Theme.HeaderEnd)
			}
			FillGradient.Rotation = 90
			FillGradient.Parent = Fill
			
			local Dragging = false
			
			local function UpdateSlider(input)
				local SizeX = math.clamp((input.Position.X - Track.AbsolutePosition.X) / Track.AbsoluteSize.X, 0, 1)
				local Value = math.floor(min + ((max - min) * SizeX))
				
				TweenService:Create(Fill, TweenInfo.new(0.1), {Size = UDim2.new(SizeX, 0, 1, 0)}):Play()
				ValueLabel.Text = tostring(Value)
				callback(Value)
			end
			
			Track.InputBegan:Connect(function(input)
				if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
					Dragging = true
					UpdateSlider(input)
				end
			end)
			
			UserInputService.InputChanged:Connect(function(input)
				if Dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
					UpdateSlider(input)
				end
			end)
			
			UserInputService.InputEnded:Connect(function(input)
				if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
					Dragging = false
				end
			end)
		end
		
		-- DROPDOWN
		function Elements:Dropdown(text, list, callback)
			local DropdownFrame = Instance.new("Frame")
			DropdownFrame.Size = UDim2.new(1, 0, 0, 35) -- Начальный размер
			DropdownFrame.BackgroundColor3 = Color3.fromRGB(250, 250, 250)
			DropdownFrame.ClipsDescendants = true
			DropdownFrame.Parent = Page
			
			local Corner = Instance.new("UICorner")
			Corner.CornerRadius = UDim.new(0, 8)
			Corner.Parent = DropdownFrame
			
			local HeaderBtn = Instance.new("TextButton")
			HeaderBtn.Size = UDim2.new(1, 0, 0, 35)
			HeaderBtn.BackgroundTransparency = 1
			HeaderBtn.Text = text
			HeaderBtn.Font = Enum.Font.Gotham
			HeaderBtn.TextSize = 14
			HeaderBtn.TextColor3 = Theme.Text
			HeaderBtn.TextXAlignment = Enum.TextXAlignment.Left
			HeaderBtn.Parent = DropdownFrame
			
			local Pad = Instance.new("UIPadding")
			Pad.PaddingLeft = UDim.new(0, 10)
			Pad.Parent = HeaderBtn
			
			local Icon = Instance.new("TextLabel")
			Icon.Text = "v"
			Icon.Size = UDim2.new(0, 30, 0, 35)
			Icon.Position = UDim2.new(1, -30, 0, 0)
			Icon.BackgroundTransparency = 1
			Icon.Font = Enum.Font.GothamBold
			Icon.TextColor3 = Theme.Text
			Icon.Parent = DropdownFrame
			
			local ListFrame = Instance.new("ScrollingFrame")
			ListFrame.Size = UDim2.new(1, -10, 0, 100)
			ListFrame.Position = UDim2.new(0, 5, 0, 40)
			ListFrame.BackgroundTransparency = 1
			ListFrame.ScrollBarThickness = 2
			ListFrame.Parent = DropdownFrame
			
			local ListLayout = Instance.new("UIListLayout")
			ListLayout.Padding = UDim.new(0, 2)
			ListLayout.Parent = ListFrame
			
			for _, item in pairs(list) do
				local ItemBtn = Instance.new("TextButton")
				ItemBtn.Size = UDim2.new(1, 0, 0, 25)
				ItemBtn.BackgroundColor3 = Color3.fromRGB(240, 240, 240)
				ItemBtn.Text = item
				ItemBtn.Font = Enum.Font.Gotham
				ItemBtn.TextColor3 = Theme.Text
				ItemBtn.TextSize = 13
				ItemBtn.Parent = ListFrame
				
				local ItemCorner = Instance.new("UICorner")
				ItemCorner.CornerRadius = UDim.new(0, 4)
				ItemCorner.Parent = ItemBtn
				
				ItemBtn.MouseButton1Click:Connect(function()
					HeaderBtn.Text = text .. ": " .. item
					callback(item)
					-- Закрыть
					TweenService:Create(DropdownFrame, TweenInfo.new(0.3), {Size = UDim2.new(1, 0, 0, 35)}):Play()
					TweenService:Create(Icon, TweenInfo.new(0.3), {Rotation = 0}):Play()
				end)
			end
			
			local open = false
			HeaderBtn.MouseButton1Click:Connect(function()
				open = not open
				if open then
					TweenService:Create(DropdownFrame, TweenInfo.new(0.3), {Size = UDim2.new(1, 0, 0, 150)}):Play()
					TweenService:Create(Icon, TweenInfo.new(0.3), {Rotation = 180}):Play()
				else
					TweenService:Create(DropdownFrame, TweenInfo.new(0.3), {Size = UDim2.new(1, 0, 0, 35)}):Play()
					TweenService:Create(Icon, TweenInfo.new(0.3), {Rotation = 0}):Play()
				end
			end)
		end

		return Elements
	end

	return Window
end

return Library
